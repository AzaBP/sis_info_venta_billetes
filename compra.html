<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrainWeb - Compra de Billetes</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/compra.css">
</head>
<body>

    <header class="header">
        <div class="logo">
            <a href="index.html" style="text-decoration:none; color:white;">
                <i class="fa-solid fa-train"></i> TrainWeb
            </a>
        </div>
        <nav class="nav">
            <div class="user-display">
                <i class="fa-solid fa-circle-user"></i> Hola, Pasajero
            </div>
            <div class="dropdown">
                <a href="#"><i class="fa-solid fa-globe"></i> ES <i class="fa-solid fa-caret-down"></i></a>
            </div>
            <a href="index.html"><i class="fa-solid fa-right-from-bracket"></i> Salir</a>
        </nav>
    </header>

    <main class="booking-container">
        
        <div class="progress-bar-container">
            <div class="step active" id="step1" onclick="irAPaso(1)">
                <span class="step-num">1</span> Trenes disponibles
            </div>
            <div class="step" id="step2" onclick="irAPaso(2)">
                <span class="step-num">2</span> Selección de asientos
            </div>
            <div class="step" id="step3">
                <span class="step-num">3</span> Pago seguro
            </div>
        </div>

        <div class="search-summary">
            <div>
                <h2><i class="fa-solid fa-route"></i> Madrid (Todas) <i class="fa-solid fa-arrow-right"></i> Barcelona Sants</h2>
                <p>Jueves, 12 de Febrero | 1 Pasajero</p>
            </div>
            <button class="btn-modify">Modificar</button>
        </div>

        <section id="sectionTrains" class="booking-section">
            
            <div class="ticket-card">
                <div class="ticket-main-info">
                    <div class="times">
                        <div class="time-group">
                            <span class="hour">07:30</span>
                            <span class="city">MAD</span>
                        </div>
                        <div class="duration-line">
                            <span class="duration-text">2h 30min</span>
                            <div class="line"><i class="fa-solid fa-train"></i></div>
                        </div>
                        <div class="time-group">
                            <span class="hour">10:00</span>
                            <span class="city">BCN</span>
                        </div>
                    </div>
                    <div class="train-details">
                        <span class="train-type type-ave">AVE</span>
                        <span class="train-id">0730</span>
                        <div class="amenities">
                            <i class="fa-solid fa-wifi" title="WiFi Gratis"></i>
                            <i class="fa-solid fa-utensils" title="Coche Cafetería"></i>
                        </div>
                    </div>
                </div>
                <div class="ticket-price-box">
                    <div class="price">45,50 €</div>
                    <button class="btn-select" onclick="seleccionarTren('AVE-0730', 45.50)">Elegir</button>
                </div>
            </div>

            <div class="ticket-card">
                <div class="ticket-main-info">
                    <div class="times">
                        <div class="time-group">
                            <span class="hour">09:15</span>
                            <span class="city">MAD</span>
                        </div>
                        <div class="duration-line">
                            <span class="duration-text">2h 45min</span>
                            <div class="line"></div>
                        </div>
                        <div class="time-group">
                            <span class="hour">12:00</span>
                            <span class="city">BCN</span>
                        </div>
                    </div>
                    <div class="train-details">
                        <span class="train-type type-avlo">AVLO</span>
                        <span class="train-id">0915</span>
                        <div class="amenities">
                            <i class="fa-solid fa-plug" title="Enchufes"></i>
                        </div>
                    </div>
                </div>
                <div class="ticket-price-box">
                    <div class="price">19,00 €</div>
                    <button class="btn-select" onclick="seleccionarTren('AVLO-0915', 19.00)">Elegir</button>
                </div>
            </div>

            <div class="ticket-card full-train">
                <div class="ticket-main-info">
                    <div class="times">
                        <div class="time-group">
                            <span class="hour">14:00</span>
                            <span class="city">MAD</span>
                        </div>
                        <div class="duration-line">
                            <span class="duration-text">3h 10min</span>
                            <div class="line"></div>
                        </div>
                        <div class="time-group">
                            <span class="hour">17:10</span>
                            <span class="city">BCN</span>
                        </div>
                    </div>
                    <div class="train-details">
                        <span class="train-type type-md">MD</span>
                        <span class="train-id">1800</span>
                    </div>
                </div>
                <div class="ticket-price-box">
                    <div class="price-full">COMPLETO</div>
                    <button class="btn-select" disabled>Agotado</button>
                </div>
            </div>
        </section>

        <section id="sectionSeats" class="booking-section hidden">
            <div class="seat-header">
                <h3>Selecciona tu plaza en <span id="lblTrenSeleccionado">--</span></h3>
                
                <div class="wagon-navigator">
                    <button class="nav-arrow" onclick="cambiarVagon(-1)"><i class="fa-solid fa-chevron-left"></i></button>
                    <span class="wagon-title">Vagón <span id="currentWagonNum">1</span> (Turista)</span>
                    <button class="nav-arrow" onclick="cambiarVagon(1)"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="train-horizontal-container">
                <div class="locomotive-indicator"><i class="fa-solid fa-train"></i> Cabina</div>
                
                <div class="wagon-frame">
                    <div class="wagon-body active" id="wagon1">
                        <div class="seat-row">
                            <div class="seat" data-seat="1A">1A</div> <div class="seat" data-seat="2A">2A</div> <div class="seat occupied">3A</div>
                            <div class="table-divider"></div> 
                            <div class="seat" data-seat="4A">4A</div> <div class="seat" data-seat="5A">5A</div>
                        </div>
                        <div class="seat-row">
                            <div class="seat" data-seat="1B">1B</div> <div class="seat occupied">2B</div> <div class="seat occupied">3B</div>
                            <div class="table-divider-space">MESA</div> 
                            <div class="seat" data-seat="4B">4B</div> <div class="seat" data-seat="5B">5B</div>
                        </div>
                        <div class="aisle-horizontal">PASILLO</div>
                        <div class="seat-row">
                            <div class="seat" data-seat="1C">1C</div> <div class="seat" data-seat="2C">2C</div> <div class="seat" data-seat="3C">3C</div>
                            <div class="table-divider-space">MESA</div> 
                            <div class="seat occupied" data-seat="4C">4C</div> <div class="seat" data-seat="5C">5C</div>
                        </div>
                        <div class="seat-row">
                            <div class="seat" data-seat="1D">1D</div> <div class="seat" data-seat="2D">2D</div> <div class="seat" data-seat="3D">3D</div>
                            <div class="table-divider"></div> 
                            <div class="seat occupied" data-seat="4D">4D</div> <div class="seat" data-seat="5D">5D</div>
                        </div>
                    </div>

                    <div class="wagon-body hidden" id="wagon2">
                         <div class="info-message"> <i class="fa-solid fa-volume-xmark"></i> Vagón Silencio </div>
                         <div class="seat-row">
                            <div class="seat" data-seat="6A">6A</div> <div class="seat" data-seat="7A">7A</div>
                            <div class="table-divider"></div>
                            <div class="seat" data-seat="8A">8A</div>
                        </div>
                        <div class="aisle-horizontal"></div>
                        <div class="seat-row">
                            <div class="seat" data-seat="6D">6D</div> <div class="seat" data-seat="7D">7D</div>
                            <div class="table-divider"></div>
                            <div class="seat" data-seat="8D">8D</div>
                        </div>
                    </div>

                     <div class="wagon-body hidden" id="wagon3">
                        <div class="info-message"> <i class="fa-solid fa-mug-hot"></i> Cerca de Cafetería </div>
                        </div>
                </div>

                <div class="tail-indicator">Cola</div>
            </div>

            <div class="booking-footer">
                <div class="selection-info">
                    Asiento: <strong id="displaySeat">Ninguno</strong>
                    <br>Total: <strong id="displayPrice">0,00 €</strong>
                </div>
                <button class="btn-next" id="btnToPayment" disabled onclick="irAPaso(3)">Continuar al Pago</button>
            </div>
        </section>

        <section id="sectionPayment" class="booking-section hidden">
            <div class="payment-container">
                <div class="payment-header">
                    <h3><i class="fa-regular fa-credit-card"></i> Datos de Pago</h3>
                    <div class="card-icons">
                        <i class="fa-brands fa-cc-visa"></i>
                        <i class="fa-brands fa-cc-mastercard"></i>
                    </div>
                </div>

                <form class="payment-form" onsubmit="event.preventDefault(); finalizarCompra();">
                    <div class="form-group full-width">
                        <label>Titular de la tarjeta</label>
                        <input type="text" placeholder="Como aparece en la tarjeta" required>
                    </div>

                    <div class="form-group full-width">
                        <label>Número de tarjeta</label>
                        <div class="input-icon">
                            <input type="text" placeholder="0000 0000 0000 0000" maxlength="19" required>
                            <i class="fa-solid fa-lock"></i>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Caducidad</label>
                            <input type="text" placeholder="MM/AA" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="password" placeholder="123" maxlength="3" required>
                        </div>
                    </div>

                    <div class="summary-box">
                        <p>Vas a pagar: <strong id="finalPrice">0,00 €</strong></p>
                        <small>Transacción encriptada y segura.</small>
                    </div>

                    <button type="submit" class="btn-pay-confirm">Pagar y Emitir Billete</button>
                </form>
            </div>
        </section>

    </main>

    <script src="js/compra.js"></script>
</body>
</html>